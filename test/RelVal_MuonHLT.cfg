process PRODHLT  = {

  #------------ Debug choices -----------------------------
  ## Usual Message Logger 
      #include "FWCore/MessageLogger/data/MessageLogger.cfi"
  ## Debug printouts (comment the previous line and uncomment the following)
      service = MessageLogger
      {
       untracked vstring destinations = { "cout" }
       untracked PSet cout = { untracked string threshold = "DEBUG" } 
       untracked vstring debugModules =  {  "l1extra"
                                          , "hltMuonLevel1Seed"
                                          , "L2Muons"
                                          , "L2MuonCandidates"
                                          , "L2MuonIsolations"
                                          , "L3Muons"
                                          , "L3MuonCandidates"
                                          , "L3MuonIsolations"
                                         }
      }

  # Randomize the thing...
  service = RandomNumberGeneratorService
  {
      untracked uint32 sourceSeed = 98765
      PSet moduleSeeds =
      {
         untracked uint32 VtxSmeared = 12345678
         untracked uint32 g4SimHits = 9876
         untracked uint32 mix = 12345
      }
  }

  # Z --> dimuon generation (no gamma* here)
  source = PythiaSource 
  { 
      untracked int32 maxEvents = 2
      untracked int32 pythiaPylistVerbosity = 0
      untracked bool pythiaHepMCVerbosity = false
      untracked int32 maxEventsToPrint = 0

      PSet PythiaParameters = {

            # This is a vector of ParameterSet names to be read, in this order
            vstring parameterSets = {
                  "pythiaUESettings", 
                  "processParameters"
            }

            include "Configuration/Generator/data/PythiaUESettings.cfi"

            vstring processParameters = {
                  "MSEL=0                  !User defined processes",
                  "MSUB(1)=1               !Incl Z0/gamma* production",
                  "MSTP(43)=2              !Only Z0", 
                  "MDME(174,1)=0           !Z decay into d dbar",        
                  "MDME(175,1)=0           !Z decay into u ubar",
                  "MDME(176,1)=0           !Z decay into s sbar",
                  "MDME(177,1)=0           !Z decay into c cbar",
                  "MDME(178,1)=0           !Z decay into b bbar",
                  "MDME(179,1)=0           !Z decay into t tbar",
                  "MDME(182,1)=0           !Z decay into e- e+",
                  "MDME(183,1)=0           !Z decay into nu_e nu_ebar",
                  "MDME(184,1)=1           !Z decay into mu- mu+",
                  "MDME(185,1)=0           !Z decay into nu_mu nu_mubar",
                  "MDME(186,1)=0           !Z decay into tau- tau+",
                  "MDME(187,1)=0           !Z decay into nu_tau nu_taubar"
            }

      }
  }

  # Simulation
  include "Configuration/StandardSequences/data/Simulation.cff"
  include "Configuration/StandardSequences/data/MixingNoPileUp.cff"
  include "Configuration/StandardSequences/data/VtxSmearedGauss.cff"
  path p0 = {simulation}

  # HLT reconstruction (no filters)
  include "HLTrigger/Muon/data/OnlyReco_2x1033.cff"
  path p1 = {recoHLTMuIso}

  # Output
  module OUTPUT = PoolOutputModule
  {
    untracked string fileName = "Zmumu.root"

    untracked vstring outputCommands = {
      # Starting point: drop everything
            "drop *",
      # Keep all objects created by this process
            "keep *_*_*_PRODHLT"
    }
  }

  # End and schedule it
  endpath outpath = {OUTPUT}
  schedule = {p0,p1,outpath}
       
}	
